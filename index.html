<!doctype html>
<html lang="it">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>Flip7 Pixel Edition</title>
  <link rel="stylesheet" href="src/style.css" />
</head>

<body>
  <div id="game-alerts" aria-live="polite" aria-atomic="true"></div>

  <!-- FX layer (sopra l'app) -->
  <div id="fx-layer" aria-hidden="true"></div>

  <!-- Mobile: FAB chat -->
  <button id="mobile-chat-fab" class="mobile-fab" type="button" aria-label="Apri chat">CHAT</button>

  <!-- Mobile: Chat Modal -->
  <div id="chat-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content pixel-panel">
      <div class="panel-title">CHAT</div>

      <div class="chat pixel-panel inset" aria-label="Chat di gioco (mobile)">
        <div id="chat-messages-mobile" class="chat-messages" role="log" aria-live="polite"></div>
        <div class="chat-input">
          <input id="chat-text-mobile" class="chat-text" type="text" maxlength="120" placeholder="Scrivi..."
            autocomplete="off" />
          <button id="chat-send-mobile" class="px-btn px-btn-secondary" type="button">INVIA</button>
          <div id="chat-hint-mobile" class="chat-hint">Invio per mandare ¬∑ Max 120</div>
        </div>
      </div>

      <button id="chat-close-mobile" class="px-btn px-btn-secondary" type="button"
        style="margin-top:10px;">CHIUDI</button>
    </div>
  </div>

  <!-- TARGET MODAL -->
  <div id="target-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content pixel-panel">
      <div id="modal-special-icon" class="modal-special-icon" aria-hidden="true" style="display:none;">‚ú®</div>
      <div class="panel-title" id="modal-title">Scegli un bersaglio</div>
      <div id="target-options" class="modal-options"></div>
      <button id="modal-close" class="px-btn px-btn-secondary" type="button" style="display:none;">CHIUDI</button>
    </div>
  </div>

  <!-- INFO MODAL -->
  <div id="info-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content pixel-panel">
      <div class="panel-title">INFO ‚Äî REGOLE & MATCH</div>

      <div class="info-block pixel-panel inset">
        <div class="section-title">REGOLE RAPIDE</div>
        <div class="info-text">
          <div>Nel tuo turno: PESCA oppure FERMATI (banchi i punti del tavolo).</div>
          <div>Se peschi un numero gi√† presente sul tuo tavolo: DOPPIONE ‚Üí SBALLATO e perdi il tavolo.</div>
          <div>2ND CHANCE (üõ°Ô∏è) annulla un solo doppione (poi si consuma).</div>
          <div>FREEZE (‚ùÑÔ∏è) obbliga un bersaglio a bancare subito i suoi punti tavolo.</div>
          <div>FLIP3 (üéÅ) fa pescare 3 carte al bersaglio; se durante FLIP3 esce una speciale, pausa per assegnarla.
          </div>
          <div>FLIP7: se hai 7 numeri diversi sul tavolo, +15 punti e il round finisce.</div>
          <div>Match: finisce quando tutti hanno giocato lo stesso numero di round e qualcuno √® ‚â•200.</div>
        </div>
      </div>

      <button id="info-close" class="px-btn px-btn-secondary" type="button">CHIUDI</button>
    </div>
  </div>

  <!-- ENDGAME MODAL -->
  <div id="endgame-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content pixel-panel">
      <div class="panel-title" id="endgame-title">PARTITA FINITA</div>

      <div class="pixel-panel inset" style="padding:10px;">
        <div class="section-title">CLASSIFICA</div>
        <div id="endgame-ranking" class="endgame-ranking"></div>

        <div id="endgame-host-actions" style="display:none; margin-top:10px;">
          <button id="endgame-newgame" class="px-btn px-btn-primary" type="button">NUOVA PARTITA</button>
        </div>
      </div>

      <button id="endgame-close" class="px-btn px-btn-secondary" type="button" style="margin-top:10px;">CHIUDI</button>
    </div>
  </div>

  <div id="app">
    <header class="topbar pixel-panel">
      <div class="top-left">
        <div class="logo">FLIP7</div>
        <div class="sub">Pixel Edition</div>
      </div>

      <div class="top-mid pixel-panel inset">
        <div class="topline">
          <span class="tag">PUNTI</span>
          <span id="my-score" class="score">0</span>

          <span class="tag">ROUND</span>
          <span id="round-score" class="score">0</span>

          <span id="sc-indicator" class="pill" style="display:none;">üõ°Ô∏è 2ND</span>
        </div>

        <div class="matchbar">
          <div class="matchrow">
            <span class="tag">MATCH ROUND</span>
            <span id="match-round" class="matchval">1</span>

            <span class="tag">TARGET</span>
            <span id="match-target" class="matchval">200</span>
          </div>

          <div class="matchrow">
            <span id="match-status" class="matchstatus"></span>
          </div>

          <div id="lock-banner"></div>
          <div id="status-bar" class="status">Caricamento‚Ä¶</div>
        </div>
      </div>

      <div class="top-right pixel-panel inset">
        <div id="deck-info" class="deck">MAZZO 0 ¬∑ SCARTI 0 ¬∑ IN GIOCO 0</div>
        <button id="btn-info" class="px-btn px-btn-secondary" type="button">INFO REGOLE</button>
        <div id="turn-tip" class="tip"></div>
      </div>
    </header>

    <main class="layout">
      <aside class="sidebar pixel-panel">
        <div class="legend pixel-panel inset">
          <div class="section-title">LEGENDA</div>
          <div class="legend-row"><span class="ic">‚ùÑÔ∏è</span><span>Freeze = banca i punti del tavolo.</span></div>
          <div class="legend-row"><span class="ic">üéÅ</span><span>Flip3 = pesca 3 carte al bersaglio.</span></div>
          <div class="legend-row"><span class="ic">üõ°Ô∏è</span><span>2nd = salva 1 doppione.</span></div>
          <div class="legend-row"><span class="ic">‚ú®</span><span>Flip7 = +15 e finisce il round.</span></div>
          <div class="legend-row"><span class="ic">ü™ô</span><span>Bank = quando fai cassa.</span></div>
        </div>

        <div class="chat pixel-panel inset" aria-label="Chat di gioco (desktop)">
          <div class="section-title">CHAT</div>
          <div id="chat-messages-desktop" class="chat-messages" role="log" aria-live="polite"></div>
          <div class="chat-input">
            <input id="chat-text-desktop" class="chat-text" type="text" maxlength="120" placeholder="Scrivi..."
              autocomplete="off" />
            <button id="chat-send-desktop" class="px-btn px-btn-secondary" type="button">INVIA</button>
            <div id="chat-hint-desktop" class="chat-hint">Invio per mandare ¬∑ Max 120</div>
          </div>
        </div>
      </aside>

      <section class="center" style="width: 100% !important;overflow: auto;">
        <section class="players pixel-panel">
          <div class="section-title">GIOCATORI</div>
          <div id="global-rank" class="rank"></div>
        </section>

        <section class="log pixel-panel">
          <div class="section-title">CRONACA ROUND (ULTIMI 5)</div>
          <div id="round-log" class="round-log"></div>
        </section>

        <section class="table pixel-panel">
          <div class="section-title">IL TUO TAVOLO</div>

          <!-- scroll qui -->
          <div id="card-display" class="cards" aria-label="Carte sul tavolo (scorri orizzontalmente)"></div>
        </section>
      </section>
    </main>

    <footer class="bottombar pixel-panel">
      <button id="btn-pesca" class="px-btn px-btn-primary" type="button" disabled>PESCA UNA CARTA</button>
      <button id="btn-stop" class="px-btn px-btn-danger" type="button" disabled>FERMATI ¬∑ BANCA</button>
    </footer>
  </div>

  <script type="module" src="src/main.js"></script>
</body>

</html>